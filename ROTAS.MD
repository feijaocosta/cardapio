# ğŸ“‹ Plano de ImplementaÃ§Ã£o de Router

**Arquivo para abrir em nova janela de conversa**

---

## âœ… Status Atual Confirmado

- âŒ **NÃƒO hÃ¡ `react-router-dom`** no package.json
- âŒ **NavegaÃ§Ã£o Ã© feita por `useState`** (client-side state)
- âŒ **URL nunca muda** durante a navegaÃ§Ã£o
- âœ… **Projeto usa React 18.2.0 + Vite + TypeScript**

---

## ğŸ¯ Objetivo Final

**Implementar React Router para que:**
1. âœ… URL mude conforme navegaÃ§Ã£o (`/`, `/menu/:menuId`, `/admin`)
2. âœ… Barra superior (navbar) **ONLY apareÃ§a em `/admin`**
3. âœ… Cliente vÃª interface limpa em `/` e `/menu/:menuId`
4. âœ… Admin vÃª barra de controle em `/admin/*`

---

## ğŸ“¦ Fase 1: InstalaÃ§Ã£o

### Terminal (na raiz do projeto):
```bash
npm install react-router-dom
```

### Verificar package.json:
```json
"dependencies": {
  "react": "^18.2.0",
  "react-dom": "^18.2.0",
  "react-router-dom": "^6.x.x",  // â† Nova linha
  ...
}
```

---

## ğŸ—ï¸ Fase 2: Estrutura de Arquivos

Criar/modificar estes arquivos:

```
src/
â”œâ”€â”€ App.tsx                          (MODIFICAR)
â”œâ”€â”€ main.tsx                         (MODIFICAR - envolver com BrowserRouter)
â”œâ”€â”€ routes/
â”‚   â””â”€â”€ router.tsx                   (CRIAR)
â”œâ”€â”€ views/
â”‚   â”œâ”€â”€ CustomerView.tsx             (CRIAR ou extrair de App.tsx)
â”‚   â””â”€â”€ AdminView.tsx                (CRIAR ou extrair de App.tsx)
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ Navbar.tsx                   (MODIFICAR - adicionar verificaÃ§Ã£o de rota)
â”‚   â””â”€â”€ customer-views/
â”‚       â””â”€â”€ image-based.tsx          (JÃ EXISTE)
â””â”€â”€ ...
```

---

## ğŸ“ Fase 3: ImplementaÃ§Ã£o (Ordem de ExecuÃ§Ã£o)

### **PASSO 1: Criar `src/routes/router.tsx`**

```tsx
import { RouteObject } from 'react-router-dom';
import CustomerView from '../views/CustomerView';
import AdminView from '../views/AdminView';

export const routes: RouteObject[] = [
  {
    path: '/',
    element: <CustomerView />,
  },
  {
    path: '/menu/:menuId',
    element: <CustomerView />,
  },
  {
    path: '/admin/*',
    element: <AdminView />,
  },
  {
    path: '*',
    element: <div>PÃ¡gina nÃ£o encontrada - 404</div>,
  },
];
```

---

### **PASSO 2: Modificar main.tsx**

```tsx
import React from 'react'
import ReactDOM from 'react-dom/client'
import { BrowserRouter } from 'react-router-dom'
import App from './App'
import './index.css'

ReactDOM.createRoot(document.getElementById('root')!).render(
  <React.StrictMode>
    <BrowserRouter>
      <App />
    </BrowserRouter>
  </React.StrictMode>,
)
```

---

### **PASSO 3: Modificar App.tsx**

```tsx
import { Routes, Route } from 'react-router-dom'
import { routes } from './routes/router'

export default function App() {
  return (
    <Routes>
      {routes.map((route) => (
        <Route key={route.path} path={route.path} element={route.element} />
      ))}
    </Routes>
  )
}
```

---

### **PASSO 4: Criar `src/views/CustomerView.tsx`**

```tsx
import { useParams } from 'react-router-dom'
import { ImageBasedLayout } from '../components/customer-views/image-based'
// import outros componentes necessÃ¡rios...
import { useState } from 'react'

export default function CustomerView() {
  const { menuId } = useParams()
  
  // TODO: Aqui vai toda a lÃ³gica que estava em App.tsx antes
  // useState para menus, selectedMenu, quantities, etc
  
  return (
    <ImageBasedLayout
      menus={menus}
      selectedMenu={selectedMenu}
      menuItems={menuItems}
      customerName={customerName}
      quantities={quantities}
      showSuccess={showSuccess}
      showPrice={showPrice}
      onSelectMenu={onSelectMenu}
      onBackToMenus={onBackToMenus}
      onCustomerNameChange={onCustomerNameChange}
      onQuantityChange={onQuantityChange}
      onSubmitOrder={onSubmitOrder}
      calculateTotal={calculateTotal}
    />
  )
}
```

---

### **PASSO 5: Criar `src/views/AdminView.tsx`**

```tsx
import { Routes, Route } from 'react-router-dom'
import Navbar from '../components/Navbar'
// import outras views admin...

export default function AdminView() {
  return (
    <div>
      <Navbar />
      <main className="container mx-auto p-4">
        <Routes>
          {/* Suas rotas admin aqui */}
          <Route path="/" element={<div>Admin Home</div>} />
          <Route path="/menus" element={<div>Gerenciar CardÃ¡pios</div>} />
          {/* ... */}
        </Routes>
      </main>
    </div>
  )
}
```

---

### **PASSO 6: Modificar `src/components/Navbar.tsx`**

```tsx
import { useLocation } from 'react-router-dom'

export default function Navbar() {
  const location = useLocation()

  // âŒ Navbar NÃƒO aparece em rotas do cliente
  if (location.pathname === '/' || location.pathname.startsWith('/menu/')) {
    return null
  }

  // âœ… Navbar sÃ³ aparece em /admin
  return (
    <nav className="bg-stone-900 text-white p-4 shadow-lg">
      <div className="container mx-auto flex justify-between items-center">
        <h1 className="text-2xl font-bold">Sistema de Pedidos</h1>
        <div className="flex gap-4">
          {/* Seus botÃµes aqui */}
          <button>CardÃ¡pios</button>
          <button>Pedidos</button>
          {/* ... */}
        </div>
      </div>
    </nav>
  )
}
```

---

## ğŸ§ª Fase 4: Testes Locais

ApÃ³s implementar, testar estas URLs no navegador:

```
âœ… http://localhost:5173/              â†’ Deve mostrar seleÃ§Ã£o de cardÃ¡pios (SEM navbar)
âœ… http://localhost:5173/menu/1        â†’ Deve mostrar cardÃ¡pio (SEM navbar)
âœ… http://localhost:5173/admin         â†’ Deve mostrar admin COM navbar
âœ… http://localhost:5173/admin/menus   â†’ Deve mostrar admin COM navbar
âŒ http://localhost:5173/xyz           â†’ Deve mostrar 404
```

---

## ğŸ”„ Fase 5: Ajustes na LÃ³gica de NavegaÃ§Ã£o

### **Em `ImageBasedLayout` ou `CustomerView`:**

Trocar de:
```tsx
onSelectMenu={() => setSelectedMenu(menu)}
onBackToMenus={() => setSelectedMenu(null)}
```

Para:
```tsx
import { useNavigate } from 'react-router-dom'

const navigate = useNavigate()

onSelectMenu={(menu) => navigate(`/menu/${menu.id}`)}
onBackToMenus={() => navigate('/')}
```

---

## âš ï¸ Checklist de ImplementaÃ§Ã£o

- [ ] Instalar `react-router-dom`
- [ ] Criar arquivo `src/routes/router.tsx`
- [ ] Modificar main.tsx (envolver com `BrowserRouter`)
- [ ] Modificar App.tsx (usar `Routes` do router)
- [ ] Criar `src/views/CustomerView.tsx` (mover lÃ³gica do App)
- [ ] Criar `src/views/AdminView.tsx` (estrutura admin)
- [ ] Modificar `src/components/Navbar.tsx` (verificar rota com `useLocation`)
- [ ] Atualizar navegaÃ§Ã£o com `useNavigate`
- [ ] Testar todas as URLs
- [ ] Verificar que navbar sÃ³ aparece em `/admin`

---

## ğŸ“š DependÃªncias do Plano

**Preciso que vocÃª forneÃ§a:**
1. Arquivo App.tsx completo (atual)
2. Arquivo `src/components/Navbar.tsx` (ou onde estÃ¡ a barra)
3. ConfirmaÃ§Ã£o: Toda lÃ³gica de estado estÃ¡ em App.tsx?

---

## ğŸš€ PrÃ³ximo Passo

**Abra uma NOVA janela de conversa** com:
1. Este arquivo como contexto
2. Os 3 arquivos solicitados acima
3. Sua resposta Ã s 3 perguntas

**Mensagem para comeÃ§ar nova conversa:**
> "Vou implementar React Router no projeto. Aqui estÃ¡ o plano. Estou fornecendo App.tsx, Navbar.tsx e confirmando a estrutura."

---

**Data**: 26 de janeiro de 2026  
**Status**: ğŸ“‹ Pronto para Nova Conversa